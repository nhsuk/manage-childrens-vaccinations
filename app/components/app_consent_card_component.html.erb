<%= render AppCardComponent.new(heading:) do %>
  <%= govuk_summary_list classes: 'app-summary-list--no-bottom-border' do |summary_list|
    summary_list.with_row do |row|
      row.with_key { "Name" }
      row.with_value { @consent.parent_name }
    end

    summary_list.with_row do |row|
      row.with_key { "Relationship" }
      row.with_value { @consent.who_responded }
    end

    summary_list.with_row do |row|
      row.with_key { "Contact" }
      row.with_value { @consent.parent_phone }
    end

    summary_list.with_row do |row|
      row.with_key { "Response" }
      row.with_value do
        render AppTimestampedEntryComponent.new(
          text: response_string,
          timestamp: Time.zone.now,
          recorded_by: @consent.recorded_by
        )
      end
    end

    if @consent.response_refused?
      summary_list.with_row do |row|
        row.with_key { "Refusal reason" }
        row.with_value do %>
          <%= @consent.human_enum_name(:reason_for_refusal) %>
          <% if @consent.reason_notes_required? %>
            <div class="nhsuk-u-margin-top-2 nhsuk-u-font-size-16">
              <%= @consent.reason_for_refusal_notes %>
            </div>
          <% end %>
        <% end
      end
    end
  end %>
<% end %>
