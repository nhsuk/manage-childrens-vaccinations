<% page_title = "Register your interest in the NHS school vaccinations pilot" %>

<%= h1 page_title:, class: "nhsuk-heading-xl" do %>
  <span class="nhsuk-caption-xl"><%= @school.name %></span>
  <%= page_title %>
<% end %>

<p>
  This pilot is for parents of children who are due to get their HPV
  vaccination this year.
</p>

<p>
  Taking part involves responding to a request for consent through a digital
  service, and then completing a follow-up survey. It should take 15 to 30
  minutes of your time.
</p>

<p>To register your interest, complete the fields below.</p>

<%= govuk_section_break visible: true, size: "l" %>

<%= form_for(@registration_form, url: registration_path) do |f| %>
  <%= f.govuk_error_summary %>

  <%= f.govuk_fieldset legend: { text: "About you", size: "l" } do %>

    <%= f.govuk_text_field :parent_name,
                           label: { text: "Your name", size: "s" },
                           class: "nhsuk-input--width-20" %>

    <%= f.govuk_radio_buttons_fieldset :parent_relationship,
                                       legend: {
                                         size: 's',
                                         text: 'Your relationship to the child'
                                       } do %>
      <%= f.govuk_radio_button :parent_relationship, "mother",
                               label: { text: 'Mum' }, link_errors: true %>
      <%= f.govuk_radio_button :parent_relationship, "father",
                               label: { text: "Dad" } %>
      <%= f.govuk_radio_button :parent_relationship, "guardian",
                               label: { text: "Guardian" } %>
      <%= f.govuk_radio_button :parent_relationship, "other",
                               label: { text: "Other" } do %>
        <%= f.govuk_text_field :parent_relationship_other,
                               label: { text: "Relationship to the child" },
                               hint: { text: "For example, carer" } %>
      <% end %>
    <% end %>

    <%= f.govuk_text_field :parent_email,
                           label: { text: "Email address", size: "s" } %>

    <%= f.govuk_text_field :parent_phone,
                           label: {
                             text: "Phone number (optional)",
                             size: "s"
                           },
                           class: "nhsuk-input--width-10" %>

  <% end %>

  <%= govuk_section_break visible: true, size: "l" %>

  <%= f.govuk_fieldset legend: { text: "About your child", size: "l" } do %>

    <%= f.govuk_text_field :first_name,
                           label: { text: "First name", size: "s" },
                           class: "nhsuk-input--width-20" %>

    <%= f.govuk_text_field :last_name,
                           label: { text: "Last name", size: "s" },
                           class: "nhsuk-input--width-20" %>

    <%= f.govuk_radio_buttons_fieldset :use_common_name,
                                       legend: {
                                         size: "s",
                                         text: "Do they use a different name in school?"
                                       } do %>
      <%= f.govuk_radio_button :use_common_name,
                               true,
                               label: { text: "Yes" },
                               link_errors: true do %>
        <%= f.govuk_text_field :common_name, label: { text: "Preferred name" } %>
      <% end %>
      <%= f.govuk_radio_button :use_common_name, false, label: { text: 'No' } %>
    <% end %>

    <%= f.govuk_date_field :date_of_birth,
                           date_of_birth: true,
                           legend: { text: "Date of birth", size: "s" },
                           hint: { text: 'For example, 27 3 2017' },
                           link_errors: true %>

    <%= f.govuk_fieldset legend: { text: "Address", size: "s" } do %>
      <p class="nhsuk-hint">
        If your child lives at more than one address, enter the address registered with the GP.
      </p>

      <%= f.govuk_text_field :address_line_1,
                             label: { text: 'Address line 1' } %>

      <%= f.govuk_text_field :address_line_2,
                             label: { text: 'Address line 2 (optional)' } %>

      <%= f.govuk_text_field :address_town,
                             label: { text: 'Town or city' } %>

      <%= f.govuk_text_field :address_postcode,
                             label: { text: 'Postcode' },
                             class: 'nhsuk-input--width-10' %>
    <% end %>

    <%= f.govuk_text_field :nhs_number,
                           label: { text: "NHS number (optional)", size: "s" },
                           class: "nhsuk-input--width-10" %>
  <% end %>

  <%= govuk_section_break visible: true, size: "l" %>

  <%= f.govuk_submit "Register your interest", secondary: true %>
<% end %>
