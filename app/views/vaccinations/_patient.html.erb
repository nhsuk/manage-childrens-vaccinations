<h1 class="nhsuk-heading-l" id="<%= dom_id patient %>">
  <%= patient.full_name %>
</h1>

<div data-controller="child-vaccination">
  <%= render AppPatientCardComponent.new(patient: @patient, session: @session) %>

  <div class="nhsuk-card">
    <div class="nhsuk-card__content">
      <h2 class="nhsuk-card__heading nhsuk-heading-m">
        Medical history
      </h2>

      <p>No triage needed</p>

      <details class="nhsuk-details nhsuk-expander nhsuk-u-margin-bottom-0">
        <summary class="nhsuk-details__summary">
          <span class="nhsuk-details__summary-text">
            Show answers
          </span>
        </summary>
        <div class="nhsuk-details__text">
          <h3 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">
            Does the child have any severe allergies that have led to an anaphylactic reaction?
          </h3>
          <p>No</p>

          <h3 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">
            Does the child have any existing medical conditions?
          </h3>
          <p>No</p>

          <h3 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">
            Does the child take any regular medication?
          </h3>
          <p>No</p>

          <h3 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">
            Is there anything else we should know?
          </h3>
          <p>No</p>
        </div>
      </details>
    </div>
  </div>

  <div class="nhsuk-card">
    <div class="nhsuk-card__content">
      <%= form_with model: @vaccination_record,
                    url: confirm_session_vaccination_path(
                      session_id: @session.id,
                      id: @patient.id,
                    ),
                    method: :post do |f| %>
        <% content_for(:before_content) { f.govuk_error_summary } %>

        <%= f.govuk_radio_buttons_fieldset(:administered,
          legend: { size: 'm', text: 'Did they get the vaccine?' }) do %>
          <p>They need their 1st dose.</p>

          <%= f.govuk_radio_button :administered, true,
            label: { text: 'Yes, they got the HPV vaccine' },
            link_errors: true do %>
            <%= f.govuk_collection_radio_buttons :site,
              VaccinationRecord.site_options,
              :id,
              :name,
              :description,
              inline: true,
              legend: {
                size: 'm',
                text: 'Where did they get it?',
                hidden: true
              } %>
          <% end %>
          <%= f.govuk_radio_button :administered, false,
            label: { text: 'No, they did not get it' } %>
        <% end %>

        <%= f.submit "Continue", class: "nhsuk-button" %>
      <% end %>
    </div>
  </div>
</div>
